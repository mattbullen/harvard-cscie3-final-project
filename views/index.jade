extends layout

block content
  h1 SMS Notifications

  p.
    Use this form to send MMS notifications to any subscribers.

  form(action='/message/send', method='POST')

    // The text of the message to send
    .form-group
      label(for='message') Enter a message
      input.form-control(type='text', name='message',
        placeholder='New message?')

    // An optional image URL
    .form-group
      label(for='imageUrl') (Optional) Image URL to send in an MMS
      input.form-control(type='text', id='send', name='imageUrl',
        placeholder='http://fake.twilio.com/some_image.png')

    button.btn.btn-primary(type='submit') Send Yourself a Message!
    
    div.
    
        <input size="30" placeholder="Search" name="search" id="search" type="text" title="Search">
        <div id="submit">Search</div>
        <div id="gallery"></div>
        
        <script>
        
        $(document).ready(function (){
            $("#submit").click(function (){
                function loadImage(event) {
                    console.log(event.target.src);
                    $("#send").val(event.target.src);
                };
                $.ajax({
                    url: 'https://www.googleapis.com/customsearch/v1?key=AIzaSyBcb5-Y-_4xba-AKItQOm9EixY51bV7VNY&cx=007271074161097264321:keiwv-_atxe&num=10&imgType=photo&searchType=image&q=' + $("#search").val(),
                    type: 'GET',
                    dataType: 'json',
                    success: function(response){
                        document.getElementById("gallery").innerHTML = "";
                        console.log(response);
                        for (var i = 0; i < response.items.length; i++) {
                           var img = response.items[i].link;
                           console.log(img);
                           document.getElementById("gallery").innerHTML += '<img class="mms" onclick="loadImage(event);" src="' + img + '" style="display: block; height: 100px; width: 100px;"/>';
                        }
                    }
                });
            });
        });    

        </script>